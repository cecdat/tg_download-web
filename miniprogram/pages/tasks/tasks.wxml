<view class="container">
  <view class="header-section">
    <view class="title-main">ä»»åŠ¡å†å²</view>
    <view class="title-sub">å›é¡¾å·²å®Œæˆæˆ–å¤±è´¥çš„ä¸‹è½½è®°å½•</view>
  </view>

  <view class="card">
    <view class="flex-between mb-24">
      <view class="section-title">ä¸‹è½½è®°å½•</view>
      <view class="btn-clear" bindtap="confirmClearTasks">æ¸…ç©º</view>
    </view>
    
    <view wx:if="{{loading && tasks.length === 0}}" class="flex-center py-40">
      <view class="loading-spinner"></view>
    </view>
    
    <view wx:elif="{{tasks.length > 0}}">
      <view class="task-card mb-20" wx:for="{{tasks}}" wx:key="id">
        <view class="task-main">
          <view class="file-icon">{{item.icon}}</view>
          <view class="task-info">
            <view class="font-bold text-md mb-10 truncate">{{item.file_name}}</view>
            <view class="task-meta flex-row">
              <view class="badge badge-info">{{item.account_name}}</view>
              <view class="text-xs text-muted ml-20" wx:if="{{item.file_size > 0}}">{{item.file_size}} MB</view>
            </view>
          </view>
          <view class="status-box">
              <view class="badge badge-success" wx:if="{{item.status === 'completed'}}">å·²å®Œæˆ</view>
              <view class="badge badge-danger" wx:elif="{{item.status === 'failed'}}">å¤±è´¥</view>
              <view class="badge badge-warning" wx:elif="{{item.status === 'downloading'}}">ä¸‹è½½ä¸­</view>
              <view class="badge badge-orange" wx:elif="{{item.status === 'waiting'}}">æ’é˜Ÿä¸­</view>
              <view class="badge badge-info" wx:elif="{{item.status === 'file_expired'}}">å·²è¿‡æœŸ</view>
          </view>
        </view>
        
        <view class="task-footer flex-between mt-20">
          <text class="text-xs text-muted">ğŸ•’ {{item.start_time}}</text>
          <view class="btn-delete-link" bindtap="confirmDeleteTask" data-id="{{item.id}}">åˆ é™¤è®°å½•</view>
        </view>
      </view>
      
      <!-- åˆ†é¡µæ§åˆ¶ -->
      <view class="pagination-container mt-40">
        <view class="btn-page {{currentPage <= 1 ? 'disabled' : ''}}" bindtap="prevPage">â—€ ä¸Šä¸€é¡µ</view>
        <view class="page-count">{{currentPage}} / {{totalPages}}</view>
        <view class="btn-page {{currentPage >= totalPages ? 'disabled' : ''}}" bindtap="nextPage">ä¸‹ä¸€é¡µ â–¶</view>
      </view>
    </view>
    
    <view wx:else class="empty-state mt-40">
      <view class="empty-icon">ğŸ“</view>
      <text class="text-muted">æš‚æ— å†å²ä»»åŠ¡è®°å½•</text>
    </view>
  </view>
</view>
